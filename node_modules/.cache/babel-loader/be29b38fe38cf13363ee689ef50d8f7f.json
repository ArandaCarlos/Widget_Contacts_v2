{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Documents\\\\ReactJs\\\\widget_contactos_v2\\\\my-app\\\\src\\\\Context\\\\ZohoContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState, useEffect } from \"react\";\nimport { ZOHO } from '../assets/Zoho';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ZohoContext = /*#__PURE__*/createContext();\nexport default function ZohoProvider({\n  children\n}) {\n  _s();\n\n  const [module, setModule] = useState(null);\n  const [entity, setEntity] = useState(null);\n  const [id, setID] = useState(null);\n  useEffect(() => {\n    const initWidget = () => {\n      ZOHO.embeddedApp.on(\"PageLoad\", function (data) {\n        console.log(data);\n        let id = data.EntityId;\n        setID(id);\n        console.log(id);\n        ZOHO.CRM.API.getRecord({\n          Entity: \"Deals\",\n          RecordID: id\n        }).then(result => {\n          setRecord(result.data[0]);\n        });\n        ZOHO.CRM.API.getRelatedRecords({\n          Entity: \"Deals\",\n          RecordID: id,\n          RelatedList: \"Oportunidades\"\n        }).then(data => {\n          setStores(data.data);\n          console.log(data.data);\n        });\n      });\n      ZOHO.embeddedApp.init();\n    };\n\n    setTimeout(() => {\n      initWidget();\n    }, 1000);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ZohoContext.Provider, {\n    value: {\n      module: module,\n      entity: entity,\n      id: id\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 7\n  }, this);\n}\n\n_s(ZohoProvider, \"rQDtolezsVzWSjWxHWVAs2Q9QtY=\");\n\n_c = ZohoProvider;\n;\nexport const useWidget = () => {\n  _s2();\n\n  const context = useContext(ZohoContext);\n  if (!context) throw new Error(\"UseWidget inside ZohoContext\");\n  const {\n    entity,\n    module,\n    id\n  } = context;\n  return {\n    entity,\n    module,\n    id\n  };\n};\n\n_s2(useWidget, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"ZohoProvider\");","map":{"version":3,"sources":["C:/Users/Usuario/Documents/ReactJs/widget_contactos_v2/my-app/src/Context/ZohoContext.js"],"names":["createContext","useContext","useState","useEffect","ZOHO","ZohoContext","ZohoProvider","children","module","setModule","entity","setEntity","id","setID","initWidget","embeddedApp","on","data","console","log","EntityId","CRM","API","getRecord","Entity","RecordID","then","result","setRecord","getRelatedRecords","RelatedList","setStores","init","setTimeout","useWidget","context","Error"],"mappings":";;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,QAApC,EAA8CC,SAA9C,QAA+D,OAA/D;AACA,SAAQC,IAAR,QAAmB,gBAAnB;;AAEA,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAEA,eAAe,SAASM,YAAT,CAAsB;AAACC,EAAAA;AAAD,CAAtB,EAAkC;AAAA;;AAE9C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACU,EAAD,EAAKC,KAAL,IAAcX,QAAQ,CAAC,IAAD,CAA5B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AAEb,UAAMW,UAAU,GAAG,MAAM;AACtBV,MAAAA,IAAI,CAACW,WAAL,CAAiBC,EAAjB,CAAoB,UAApB,EAAgC,UAAUC,IAAV,EAAgB;AAC7CC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAIL,EAAE,GAAGK,IAAI,CAACG,QAAd;AACAP,QAAAA,KAAK,CAACD,EAAD,CAAL;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAYP,EAAZ;AACAR,QAAAA,IAAI,CAACiB,GAAL,CAASC,GAAT,CAAaC,SAAb,CAAuB;AAACC,UAAAA,MAAM,EAAC,OAAR;AAAgBC,UAAAA,QAAQ,EAACb;AAAzB,SAAvB,EAAqDc,IAArD,CAA2DC,MAAD,IAAU;AACjEC,UAAAA,SAAS,CAACD,MAAM,CAACV,IAAP,CAAY,CAAZ,CAAD,CAAT;AACF,SAFD;AAGAb,QAAAA,IAAI,CAACiB,GAAL,CAASC,GAAT,CAAaO,iBAAb,CAA+B;AAACL,UAAAA,MAAM,EAAC,OAAR;AAAgBC,UAAAA,QAAQ,EAACb,EAAzB;AAA4BkB,UAAAA,WAAW,EAAC;AAAxC,SAA/B,EAAyFJ,IAAzF,CAA+FT,IAAD,IAAQ;AACnGc,UAAAA,SAAS,CAACd,IAAI,CAACA,IAAN,CAAT;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACA,IAAjB;AACH,SAHA;AAMF,OAdD;AAiBAb,MAAAA,IAAI,CAACW,WAAL,CAAiBiB,IAAjB;AACF,KAnBD;;AAqBAC,IAAAA,UAAU,CAAC,MAAK;AACbnB,MAAAA,UAAU;AACZ,KAFS,EAEP,IAFO,CAAV;AAIF,GA3BQ,EA2BN,EA3BM,CAAT;AA6BA,sBACG,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAACN,MAAAA,MAAM,EAAEA,MAAT;AAAiBE,MAAAA,MAAM,EAAEA,MAAzB;AAAiCE,MAAAA,EAAE,EAACA;AAApC,KAA7B;AAAA,cACIL;AADJ;AAAA;AAAA;AAAA;AAAA,UADH;AAKF;;GAxCuBD,Y;;KAAAA,Y;AAwCvB;AAED,OAAO,MAAM4B,SAAS,GAAG,MAAM;AAAA;;AAE5B,QAAMC,OAAO,GAAGlC,UAAU,CAACI,WAAD,CAA1B;AAEA,MAAI,CAAC8B,OAAL,EAAc,MAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AAEd,QAAM;AAAE1B,IAAAA,MAAF;AAAUF,IAAAA,MAAV;AAAkBI,IAAAA;AAAlB,MAAwBuB,OAA9B;AAEA,SAAO;AACJzB,IAAAA,MADI;AACIF,IAAAA,MADJ;AACYI,IAAAA;AADZ,GAAP;AAGF,CAXM;;IAAMsB,S","sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\r\nimport {ZOHO} from '../assets/Zoho';\r\n\r\nconst ZohoContext = createContext();\r\n\r\nexport default function ZohoProvider({children}) {\r\n\r\n   const [module, setModule] = useState(null);\r\n   const [entity, setEntity] = useState(null);\r\n   const [id, setID] = useState(null);\r\n\r\n   useEffect(() => {\r\n\r\n      const initWidget = () => {\r\n         ZOHO.embeddedApp.on(\"PageLoad\", function (data) {\r\n            console.log(data);\r\n            let id = data.EntityId;\r\n            setID(id);\r\n            console.log(id);\r\n            ZOHO.CRM.API.getRecord({Entity:\"Deals\",RecordID:id}).then((result)=>{\r\n               setRecord(result.data[0])\r\n            })\r\n            ZOHO.CRM.API.getRelatedRecords({Entity:\"Deals\",RecordID:id,RelatedList:\"Oportunidades\"}).then((data)=>{\r\n               setStores(data.data);\r\n               console.log(data.data);\r\n           })\r\n            \r\n         \r\n         });\r\n         \r\n\r\n         ZOHO.embeddedApp.init();\r\n      }\r\n\r\n      setTimeout(()=> {\r\n         initWidget();\r\n      }, 1000);\r\n      \r\n   }, []);\r\n   \r\n   return (\r\n      <ZohoContext.Provider value={{module: module, entity: entity, id:id}}>\r\n         {children}\r\n      </ZohoContext.Provider>\r\n   );\r\n};\r\n\r\nexport const useWidget = () => {\r\n\r\n   const context = useContext(ZohoContext);\r\n\r\n   if (!context) throw new Error(\"UseWidget inside ZohoContext\");\r\n\r\n   const { entity, module, id} = context;\r\n\r\n   return {\r\n      entity, module, id\r\n   }\r\n}"]},"metadata":{},"sourceType":"module"}